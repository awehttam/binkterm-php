# DOSBox Bridge Production Configuration (Headless)
# This config runs DOSBox-X headless for production server deployment
# COM1 connected to bridge server via TCP
#
# HEADLESS MODE NOTES:
# - Windows: windowposition=-2000,-2000 works (window offscreen, serial works)
# - Linux: May be able to use SDL_VIDEODRIVER=dummy (needs testing)
# - The -nogui flag is used on Windows, helps reduce GUI overhead
# - TRUE headless (SDL_VIDEODRIVER=dummy) breaks serial ports on Windows

[sdl]
fullscreen=false
output=surface
windowresolution=640x400
autolock=false
# Position window offscreen (works on Windows, invisible to users)
windowposition=-2000,-2000
# Linux alternative (uncomment for testing on Linux):
# SDL_VIDEODRIVER can be set via environment variable instead of config

[dosbox]
machine=svga_s3
memsize=4

[render]
aspect=true
scaler=normal2x

[cpu]
core=auto
cputype=auto
cycles=10000

[serial]
# COM1 connects to bridge server on TCP port
# Bridge listens on port, DOSBox connects to it
# transparent:1 passes through control signals, fossil=true enables FOSSIL API
serial1=nullmodem server:127.0.0.1 port:5000 transparent:1
serial1_fossil=true

[dos]
xms=true
ems=true
# Enable CONFIG.SYS processing (loads FOSSIL driver)
ver=7.1
# Aggressive directory cache refresh for multi-node support
automount=true
dir_cache_timeout=1000

[autoexec]
# Mount directories and launch door game
@echo off
mount c dosbox-bridge\dos
c:
# Door-specific commands will be appended here
